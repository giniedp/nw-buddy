<label class="input input-sm w-full group focus-within:input-primary">
  <input
    class="w-full"
    [class.text-primary]="!!value()"
    #input
    type="text"
    [placeholder]="placeholder()"
    [ngModel]="value()"
    (ngModelChange)="submit($event)"
    (focus)="onFocus()"
    autofocus
  />
  @if (!value()) {
    <span class="text-xs font-mono transition-opacity opacity-100 group-focus-within:opacity-0 pointer-events-none">
      CTRL + /
    </span>
  } @else {
    <button
      class="btn btn-sm btn-ghost btn-square bg-transparent -mr-2"
      [class.text-primary]="!!value()"
      (click)="submit('')"
    >
      <nwb-icon [icon]="svgXmark" class="w-4 h-4" />
    </button>
  }
</label>

<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="cdkOrigin"
  [cdkConnectedOverlayOpen]="isPanelOpen()"
  [cdkConnectedOverlayHasBackdrop]="false"
  [cdkConnectedOverlayPositions]="[{ originX: 'end', originY: 'bottom', overlayX: 'end', overlayY: 'top', offsetY: 5 }]"
  (overlayOutsideClick)="onOutsideClick($event)"
  (backdropClick)="closePanel()"
  (detach)="closePanel()"
>
  <nwb-search-results-panel
    class="w-[334px] overflow-clip bg-base-200 border border-base-100 rounded-md shadow-lg"
    [isLoading]="isLoading()"
    [data]="results()"
    (recordSelected)="closePanel()"
  />
</ng-template>
